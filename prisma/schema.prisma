// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("POSTGRES_URL")
}

model Libro {
  ID_LIBRO       Int      @id @default(autoincrement())
  ISBN           String      
  TITULO         String   @db.VarChar(255)
  AUTOR          String   @db.VarChar(255)
  EDITORIAL      String   @db.VarChar(255)
  FECHA_EDICION  String   @db.VarChar(255)
  IMAGEURL       String   @db.VarChar(255)
  CALIFICACION   Decimal  @db.Decimal(18, 2)
  TIPO_TAPA          String?   @db.VarChar(255)
  PRECIO             Decimal  @db.Decimal(10, 2)
  CANTIDAD_LIBROS               Int

  Libro_Genero Libro_Genero[]
  Comentario   Comentario[]
  ventas Ventas[]
}

model Genero {
  ID_GENERO     Int            @id @default(autoincrement())
  NOMBRE_GENERO String         @unique
  Libro_Genero  Libro_Genero[]
}

model Libro_Genero {
  ID_LIBRO_GENERO      Int      @id @default(autoincrement())
  ID_GENERO             Int
  ID_LIBRO               Int

  // Relaciones con Genero y Libro
  genero Genero @relation(fields: [ID_GENERO], references: [ID_GENERO])
  libro   Libro   @relation(fields: [ID_LIBRO], references: [ID_LIBRO])
}


model Comentario {
  ID_COMENTARIO          Int      @id @default(autoincrement())
  DESCRIPCION_COMENTARIO String   @db.Text
  FECHA_COMENTARIO       DateTime @default(now()) @db.Date
  ID_USUARIO             String
  ID_LIBRO               Int

  // Relaciones con Usuario y Libro
  libro   Libro   @relation(fields: [ID_LIBRO], references: [ID_LIBRO])
}



model Ventas {
  ID_VENTAS       Int      @id @default(autoincrement())
  CANTIDAD_LIBROS Int
  FECHA_HORA      DateTime @default(now()) @db.Timestamp
  IMPUESTOS       Decimal  @db.Decimal(10, 2)
  SUBTOTAL        Decimal  @db.Decimal(10, 2)
  TOTAL           Decimal  @db.Decimal(10, 2)
  ID_LIBRO    Int  
  libro   Libro   @relation(fields: [ID_LIBRO], references: [ID_LIBRO])


  
  ID_USUARIO      String 
}